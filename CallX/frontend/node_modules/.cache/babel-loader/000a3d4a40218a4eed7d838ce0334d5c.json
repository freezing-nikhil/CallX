{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nikita\\\\OneDrive\\\\Desktop\\\\Nik\\\\CallX\\\\frontend\\\\src\\\\pages\\\\Steps\\\\StepOtp\\\\StepOtp.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport Card from '../../../components/shared/Card/Card';\nimport TextInput from '../../../components/shared/TextInput/TextInput';\nimport Button from '../../../components/shared/Button/Button';\nimport styles from './StepOtp.module.css';\nimport { verifyOtp } from '../../../http';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setAuth } from '../../../store/authSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StepOtp = () => {\n  _s();\n  const [otp, setOtp] = useState('');\n  const [error, setError] = useState('');\n  const dispatch = useDispatch();\n  const {\n    phone,\n    email,\n    hash\n  } = useSelector(state => state.auth.otp);\n  async function submit() {\n    if (!otp || otp.length !== 4) {\n      setError('Please enter a valid 4-digit OTP');\n      return;\n    }\n    if (!hash) {\n      setError('OTP expired. Please request again.');\n      return;\n    }\n    try {\n      const payload = {\n        otp,\n        hash\n      };\n      if (phone) payload.phone = phone;\n      if (email) payload.email = email;\n      const {\n        data\n      } = await verifyOtp(payload);\n      dispatch(setAuth(data));\n    } catch (err) {\n      setError('Invalid or expired OTP');\n      console.log(err);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.cardWrapper,\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      title: \"Enter the 4-digit code\",\n      icon: \"lock\",\n      children: [/*#__PURE__*/_jsxDEV(TextInput, {\n        value: otp,\n        onChange: e => {\n          // allow numbers only\n          const value = e.target.value.replace(/\\D/g, '');\n          if (value.length <= 4) {\n            setOtp(value);\n            setError('');\n          }\n        },\n        placeholder: \"1234\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.error,\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.actionButtonWrap,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: submit,\n          text: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.bottomParagraph,\n        children: \"By continuing, you agree to our Terms of Service and Privacy Policy.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, this);\n};\n_s(StepOtp, \"bxWPxsjhqiGECLpxDDKf6VObAbM=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = StepOtp;\nexport default StepOtp;\nvar _c;\n$RefreshReg$(_c, \"StepOtp\");","map":{"version":3,"names":["React","useState","Card","TextInput","Button","styles","verifyOtp","useSelector","useDispatch","setAuth","jsxDEV","_jsxDEV","StepOtp","_s","otp","setOtp","error","setError","dispatch","phone","email","hash","state","auth","submit","length","payload","data","err","console","log","className","cardWrapper","children","title","icon","value","onChange","e","target","replace","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","actionButtonWrap","onClick","text","bottomParagraph","_c","$RefreshReg$"],"sources":["C:/Users/Nikita/OneDrive/Desktop/Nik/CallX/frontend/src/pages/Steps/StepOtp/StepOtp.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport Card from '../../../components/shared/Card/Card';\nimport TextInput from '../../../components/shared/TextInput/TextInput';\nimport Button from '../../../components/shared/Button/Button';\nimport styles from './StepOtp.module.css';\nimport { verifyOtp } from '../../../http';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setAuth } from '../../../store/authSlice';\n\nconst StepOtp = () => {\n    const [otp, setOtp] = useState('');\n    const [error, setError] = useState('');\n\n    const dispatch = useDispatch();\n    const { phone, email, hash } = useSelector((state) => state.auth.otp);\n\n    async function submit() {\n        if (!otp || otp.length !== 4) {\n            setError('Please enter a valid 4-digit OTP');\n            return;\n        }\n\n        if (!hash) {\n            setError('OTP expired. Please request again.');\n            return;\n        }\n\n        try {\n            const payload = { otp, hash };\n\n            if (phone) payload.phone = phone;\n            if (email) payload.email = email;\n\n            const { data } = await verifyOtp(payload);\n\n            dispatch(setAuth(data));\n        } catch (err) {\n            setError('Invalid or expired OTP');\n            console.log(err);\n        }\n    }\n\n    return (\n        <div className={styles.cardWrapper}>\n            <Card title=\"Enter the 4-digit code\" icon=\"lock\">\n                <TextInput\n                    value={otp}\n                    onChange={(e) => {\n                        // allow numbers only\n                        const value = e.target.value.replace(/\\D/g, '');\n                        if (value.length <= 4) {\n                            setOtp(value);\n                            setError('');\n                        }\n                    }}\n                    placeholder=\"1234\"\n                />\n\n                {error && <p className={styles.error}>{error}</p>}\n\n                <div className={styles.actionButtonWrap}>\n                    <Button onClick={submit} text=\"Next\" />\n                </div>\n\n                <p className={styles.bottomParagraph}>\n                    By continuing, you agree to our Terms of Service and Privacy Policy.\n                </p>\n            </Card>\n        </div>\n    );\n};\n\nexport default StepOtp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}